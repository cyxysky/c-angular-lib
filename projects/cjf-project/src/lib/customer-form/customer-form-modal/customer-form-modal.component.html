<div *ngFor="let group of data;index as groupIndex" class="form-box">
	<div class="group-title">
		{{ group.title }}
	</div>
	<div class="group-space-line" [style.grid-template-columns]="columnsGridStyle">
		<div *ngFor="let row of range(columns);index as colIndex" (mouseenter)="enterDrag(groupIndex, 0, colIndex + 1, 1)"></div>
	</div>
	<!-- 组 -->
	<div 
		class="group-grid-box" 
		[style.grid-template-rows]="'repeat(' + groupRowCountMap.get(group.id) + ', 1fr)'"
		[style.grid-template-columns]="columnsGridStyle">
		<ng-container *ngFor="let row of range(groupRowCountMap.get(group.id));index as rowIndex">
			<ng-container *ngFor="let row of range(columns);index as colIndex">
				<div 
					[style.grid-column-start]="colIndex + 1" 
					[style.grid-row-start]="rowIndex + 1"
					(mouseenter)="enterDrag(groupIndex, -1, colIndex + 1, rowIndex + 1)" 
					[ngClass]="{'backGrid': isDragging}">
				</div>
			</ng-container>
		</ng-container>
		<!-- 组件 -->
		<div 
			*ngFor="let component of group.components;index as componentIndex"
			#COMPONENTS 
			class="components no-copy" 
			[style.grid-column-end]="'span ' + component.width" 
			[style.pointer-events]="isDragging ? 'none' : 'auto'"
			[style.grid-column-start]="component.x" 
			[style.grid-row-start]="component.y"
			[ngClass]="{'components-select' : (selectId === component.id && !isDragging), 'drop-placeholder' : selectId === component.id}"
			(mousedown)="startDragging(groupIndex, componentIndex, component, COMPONENTS)" 
			(mouseleave)="leave()"
			(mouseenter)="enterDrag(groupIndex, componentIndex, component.x, component.y)">
			<div class="operater-buttons" *ngIf="selectId === component.id && !isDragging">
				<div class="operater-buttons-icon">
					<div 
						qzIcon2 
						qzIconName="icon-File" 
						qzIconSize="12" 
						qzIconColor="white"
						(click)="copyComponents(groupIndex, componentIndex)">
					</div>
				</div>
				<div>|</div>
				<div class="operater-buttons-icon">
					<div 
						qzIcon2 
						qzIconName="icon-Delete-Fill" 
						qzIconSize="12" 
						qzIconColor="white"
						(click)="deleteComponents(groupIndex, componentIndex)">
					</div>
				</div>
			</div>
			<div class="column-flex">
				<div class="form-label">
					{{ component.title }}
				</div>
				<div class="none-pointer">
					<ng-container 
						*ngIf="component.template" 
						[ngTemplateOutlet]="source.get(component.template)"
						[ngTemplateOutletContext]="{ $implicit: component }">
					</ng-container>
					<ng-container *ngIf="!component.template || (component.template && !source.get(component.template))">
						<!-- 预定义组件入口,目前考虑使用动态组件，但是会有问题 -->
						<qz-input qzPlaceholder="我永远喜欢椎名真白"></qz-input>
					</ng-container>
				</div>
			</div>
		</div>
	</div>
	<div class="group-space-line" [style.grid-template-columns]="columnsGridStyle">
		<div 
			*ngFor="let row of range(columns);index as colIndex"
			(mouseenter)="enterDrag(groupIndex, group.components.length , colIndex + 1, groupRowCountMap.get(group.id) + 1)">
		</div>
	</div>
</div>