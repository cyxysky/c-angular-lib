<div class="lib-tabs" 
     [class.lib-tabs-top]="tabPosition === 'top'" 
     [class.lib-tabs-bottom]="tabPosition === 'bottom'" 
     [class.lib-tabs-left]="tabPosition === 'left'" 
     [class.lib-tabs-right]="tabPosition === 'right'" 
     [class.lib-tabs-card]="type === 'card'" 
     [class.lib-tabs-small]="size === 'small'" 
     [class.lib-tabs-large]="size === 'large'" 
     [class.lib-tabs-animated]="animated">
  <div class="lib-tabs-nav" [class.lib-tabs-nav-centered]="centered">
    <div class="lib-tabs-nav-list">
      <div *ngFor="let tab of allTabs; let i = index; trackBy: trackByTab" 
           class="lib-tabs-tab" 
           (click)="selectTab(i)" 
           [class.lib-tabs-tab-active]="isActive(i)" 
           [class.lib-tabs-tab-disabled]="tab.disabled"
           #tabItem>
        <div class="lib-tabs-tab-btn">
          <ng-container *ngIf="tab.customTitle; else defaultTitle">
            <ng-container [ngTemplateOutlet]="tab.customTitle"></ng-container>
          </ng-container>
          <ng-template #defaultTitle>
            <span *ngIf="tab.icon" class="lib-tabs-tab-icon"><i class="{{tab.icon}}"></i></span>
            <span class="lib-tabs-tab-text">{{tab.title}}</span>
          </ng-template>
          <span *ngIf="closable && !tab.disabled" 
                class="lib-tabs-tab-close" 
                (click)="onCloseTab(i, $event)">Ã—</span>
        </div>
      </div>
      
      <div *ngIf="!hideAdd" class="lib-tabs-tab lib-tabs-tab-add" (click)="onAddTab()">
        <div class="lib-tabs-tab-btn">
          <span class="lib-tabs-tab-add-icon"><i class="bi bi-plus-circle"></i></span>
        </div>
      </div>
    </div>
    
    <div *ngIf="type === 'line'" class="lib-tabs-ink-bar" [ngStyle]="inkBarStyle"></div>
  </div>
  
  <div class="lib-tabs-content">
    <div *ngFor="let tab of allTabs; let i = index; trackBy: trackByTab"
         class="lib-tabs-tabpane"
         [class.lib-tabs-tabpane-active]="isActive(i)"
         [style.display]="(!animated && !isActive(i)) ? 'none' : 'block'">
      <ng-container *ngIf="isActive(i) || animated">
        <ng-container [ngTemplateOutlet]="tab.content"></ng-container>
      </ng-container>
    </div>
  </div>
</div>
