.c-lib-popover {
    position: relative;
    min-width: @popover-min-width;
    border-radius: @popover-border-radius;
    box-shadow: @shadow-1-down;
    transform: scale(0.1);
    opacity: 0;
    transition: @popover-transition;
    background-color: @text-color-inverse;
    font-size: @popover-font-size;

    &.c-lib-popover-visible {
        opacity: 1;
        transform: scale(1);
    }

    .c-lib-popover-content {
        min-height: @popover-content-min-height;
        padding: @popover-content-padding;
        overflow-wrap: break-word;
        word-wrap: break-word;
    }

    .c-lib-popover-title {
        margin: 0;
        padding: @popover-title-padding;
        color: @text-color;
        font-weight: @popover-title-font-weight;
        border-bottom: @base-border-width solid fade(@black, 10%);
    }

    .c-lib-popover-arrow {
        position: absolute;
        width: 0;
        height: 0;
    }

    // 基础方向
    &.c-lib-popover-top {
        .c-lib-popover-arrow {
            bottom: -@popover-arrow-size;
            left: 50%;
            margin-left: -@popover-arrow-size;
            border-left: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid transparent;
            border-top: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(0px @popover-arrow-shadow-offset @shadow-level-1 @shadow-color);
        }
    }

    &.c-lib-popover-bottom {
        .c-lib-popover-arrow {
            top: -@popover-arrow-size;
            left: 50%;
            margin-left: -@popover-arrow-size;
            border-left: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(0px -@popover-arrow-shadow-offset @shadow-level-1 @shadow-color);
        }
    }

    &.c-lib-popover-left {
        .c-lib-popover-arrow {
            top: 50%;
            right: -@popover-arrow-size;
            margin-top: -@popover-arrow-size;
            border-top: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid transparent;
            border-left: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(@popover-arrow-shadow-offset 0 @shadow-level-1 @shadow-color);
        }
    }

    &.c-lib-popover-right {
        .c-lib-popover-arrow {
            top: 50%;
            left: -@popover-arrow-size;
            margin-top: -@popover-arrow-size;
            border-top: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(-@popover-arrow-shadow-offset 0 @shadow-level-1 @shadow-color);
        }
    }

    // 左侧系列
    &.c-lib-popover-left-top {
        .c-lib-popover-arrow {
            top: @popover-arrow-offset;
            right: -@popover-arrow-size;
            border-top: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid transparent;
            border-left: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(@popover-arrow-shadow-offset 0 @shadow-level-1 @shadow-color);
        }
    }

    &.c-lib-popover-left-bottom {
        .c-lib-popover-arrow {
            bottom: @popover-arrow-offset;
            right: -@popover-arrow-size;
            border-top: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid transparent;
            border-left: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(@popover-arrow-shadow-offset 0 @shadow-level-1 @shadow-color);
        }
    }

    // 右侧系列
    &.c-lib-popover-right-top {
        .c-lib-popover-arrow {
            top: @popover-arrow-offset;
            left: -@popover-arrow-size;
            border-top: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(-@popover-arrow-shadow-offset 0 @shadow-level-1 @shadow-color);
        }
    }

    &.c-lib-popover-right-bottom {
        .c-lib-popover-arrow {
            bottom: @popover-arrow-offset;
            left: -@popover-arrow-size;
            border-top: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(-@popover-arrow-shadow-offset 0 @shadow-level-1 @shadow-color);
        }
    }

    // 顶部系列
    &.c-lib-popover-top-left {
        .c-lib-popover-arrow {
            bottom: -@popover-arrow-size;
            left: @popover-arrow-offset;
            border-left: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid transparent;
            border-top: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(0px @popover-arrow-shadow-offset @shadow-level-1 @shadow-color);
        }
    }

    &.c-lib-popover-top-right {
        .c-lib-popover-arrow {
            bottom: -@popover-arrow-size;
            right: @popover-arrow-offset;
            border-left: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid transparent;
            border-top: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(0px @popover-arrow-shadow-offset @shadow-level-1 @shadow-color);
        }
    }

    // 底部系列
    &.c-lib-popover-bottom-left {
        .c-lib-popover-arrow {
            top: -@popover-arrow-size;
            left: @popover-arrow-offset;
            border-left: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(0px -@popover-arrow-shadow-offset @shadow-level-1 @shadow-color);
        }
    }

    &.c-lib-popover-bottom-right {
        .c-lib-popover-arrow {
            top: -@popover-arrow-size;
            right: @popover-arrow-offset;
            border-left: @popover-arrow-size solid transparent;
            border-right: @popover-arrow-size solid transparent;
            border-bottom: @popover-arrow-size solid @text-color-inverse;
            filter: drop-shadow(0px -@popover-arrow-shadow-offset @shadow-level-1 @shadow-color);
        }
    }
}

.c-lib-popover-footer {
    display: flex;
    gap: @popover-footer-gap;
    padding: @popover-footer-padding;
}